(()=>{"use strict";const e=window.wp.blocks,t=window.React,s=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.components,l=window.wp.element;(0,e.registerBlockType)("dmg-test/posts-embed",{edit:({attributes:e,setAttributes:a})=>{const r=(0,o.useBlockProps)(),{postResults:c,content:p,keyword:i}=e,d=e=>{const s=e.map(((e,s)=>(0,t.createElement)(React.Fragment,{key:s},(0,t.createElement)("a",{href:e.permalink,onClick:t=>{var s,o;t.preventDefault(),s=e.permalink,o=e.title,a({content:`<div>Read More: <a class="dmg-read-more" href="${s}">${o}</a></div>`})}},e.title),(0,t.createElement)("br",null))));a({postResults:s})};return(0,l.useEffect)((async()=>{let e=await fetch("http://localhost/wp-json/dmg-post-embed/v1/get?type=post&page=1");if(200!==e.status)a({postResults:"No posts founds!"});else{let t=await e.json();d(t)}a({keyword:""})}),[]),(0,t.createElement)("div",{...r},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,s.__)("Insert Posts Links","posts-embed-block")},(0,t.createElement)(n.TextControl,{label:"Search Posts",onChange:async e=>{let t=`?type=post&page=1&keyword=${e}`;a({keyword:e,postResults:"Loading..."});let s=await fetch("http://localhost/wp-json/dmg-post-embed/v1/get"+t);if(200!==s.status)a({postResults:"No posts founds!"});else{let e=await s.json();d(e)}},value:i}),i?"":(0,t.createElement)("label",null,(0,t.createElement)("b",null,"Recent posts")),(0,t.createElement)("div",{id:"post-results"},c))),(0,t.createElement)(o.RichText,{tagName:"p",value:p,placeholder:"Search links to insert to the post...",onChange:e=>a({content:e})}))},save:({attributes:e,setAttributes:s})=>{const{content:n,keyword:a}=e,r=o.useBlockProps.save();return(0,t.createElement)("div",{...r}," ",(0,t.createElement)(l.RawHTML,null,n)," ")}})})();